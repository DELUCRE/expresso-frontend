<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão - Expresso Itaporanga</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos específicos para gestão */
        .gestao-container {
            min-height: 100vh;
            background: var(--light-bg);
            padding-top: 80px;
        }
        
        .gestao-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        .gestao-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .gestao-subtitle {
            opacity: 0.8;
        }
        
        .user-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .user-welcome {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        

        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--text-color);
            font-size: 1.1rem;
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .action-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .action-card:hover {
            transform: translateY(-5px);
        }
        
        .action-icon {
            font-size: 3rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }
        
        .action-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .action-description {
            color: var(--text-color);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .action-btn {
            background: var(--primary-color);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .action-btn:hover {
            background: #003366;
        }
        
        /* Navegação por Seções */
        .section-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            padding: 1rem;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .nav-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid transparent;
            border-radius: 8px;
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: var(--light-bg);
            color: var(--primary-color);
        }
        
        .nav-btn.active {
            background: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }
        
        /* Seções de Conteúdo */
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }

        /* Estilos para Seção de Rotas */
        .page-header {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .page-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .page-subtitle {
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .actions-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            gap: 1rem;
        }
        
        .search-box {
            flex: 1;
            max-width: 400px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }
        
        .btn-nova-rota {
            background: var(--accent-color);
            color: var(--white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .rotas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }
        
        .rota-card {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .rota-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }
        
        .rota-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .rota-nome {
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
        }
        
        .rota-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-ativa {
            background: #d4edda;
            color: #155724;
        }
        
        .status-inativa {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-manutencao {
            background: #fff3cd;
            color: #856404;
        }
        
        .rota-info {
            margin-bottom: 1rem;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-size: 0.9rem;
        }
        
        .info-icon {
            color: var(--accent-color);
            width: 16px;
        }
        
        .rota-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e1e5e9;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .rota-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn-action {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }
        
        .btn-editar {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .btn-otimizar {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        
        .btn-excluir {
            background: #ffebee;
            color: #d32f2f;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e1e5e9;
        }
        
        .modal-title {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin: 0;
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            color: var(--text-color);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .btn-salvar {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
        }

        /* Estilos para Seção de Configurações */
        .config-sections {
            display: grid;
            gap: 2rem;
        }
        
        .config-section {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--white);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .section-icon {
            font-size: 1.5rem;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin: 0;
        }
        
        .section-content {
            padding: 2rem;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            transition: border-color 0.3s;
        }
        
        .config-item:hover {
            border-color: var(--primary-color);
        }
        
        .config-info {
            flex: 1;
        }
        
        .config-label {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 0.25rem;
        }
        
        .config-description {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }
        
        .config-control {
            margin-left: 1rem;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }

        @media (max-width: 768px) {
            .gestao-title {
                font-size: 2rem;
            }
            
            .stats-grid,
            .actions-grid {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .section-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .nav-btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <img src="static/images/logo-oficial.png" alt="Expresso Itaporanga" class="logo">
                <span class="brand-text">Expresso Itaporanga</span>
            </div>
            
            <!-- Menu Hamburger -->
            <button class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <!-- Navigation -->
            <nav class="nav" id="nav">
                <ul class="nav-list">
                    <li><a href="#" class="nav-link" onclick="logout()">Sair</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="gestao-container">
        <div class="gestao-header">
            <div class="container">
                <div class="user-info">
                    <div class="user-welcome">
                        <i class="fas fa-user-circle"></i>
                        <span>Bem-vindo, <strong id="userName">Admin</strong></span>
                    </div>
                </div>
                <h1 class="gestao-title">Sistema de Gestão</h1>
                <p class="gestao-subtitle">Painel administrativo da Expresso Itaporanga</p>
            </div>
        </div>

        <div class="container">
            <!-- Visão Geral -->
            <section class="stats-section">
                <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Visão Geral</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="entregasAtivas">0</div>
                        <div class="stat-label">Entregas Ativas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalEntregas">0</div>
                        <div class="stat-label">Total Entregas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="taxaSucesso">0%</div>
                        <div class="stat-label">Taxa de Sucesso</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="clientesAtivos">0</div>
                        <div class="stat-label">Clientes Ativos</div>
                    </div>
                </div>
            </section>

            <!-- Navegação por Seções -->
            <nav class="section-nav">
                <button class="nav-btn active" onclick="mostrarSecao('dashboard')" id="btn-dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" onclick="mostrarSecao('rotas')" id="btn-rotas">
                    <i class="fas fa-route"></i> Rotas
                </button>
                <button class="nav-btn" onclick="mostrarSecao('configuracoes')" id="btn-configuracoes">
                    <i class="fas fa-cog"></i> Configurações
                </button>
            </nav>

            <!-- Seção Dashboard -->
            <section class="content-section active" id="secao-dashboard">
                <!-- Ações Rápidas -->
                <div class="actions-section">
                    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Ações Rápidas</h2>
                <div class="actions-grid">
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3 class="action-title">Nova Entrega</h3>
                        <p class="action-description">Cadastre uma nova entrega no sistema com todas as informações necessárias.</p>
                        <button class="action-btn" onclick="novaEntrega()">Cadastrar Entrega</button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-list-alt"></i>
                        </div>
                        <h3 class="action-title">Gerenciar Entregas</h3>
                        <p class="action-description">Visualize, edite e acompanhe todas as entregas em andamento.</p>
                        <button class="action-btn" onclick="gerenciarEntregas()">Ver Entregas</button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="action-title">Clientes</h3>
                        <p class="action-description">Gerencie informações dos clientes e histórico de entregas.</p>
                        <button class="action-btn" onclick="gerenciarClientes()">Gerenciar Clientes</button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3 class="action-title">Relatórios</h3>
                        <p class="action-description">Acesse relatórios detalhados e análises de desempenho.</p>
                        <button class="action-btn" onclick="verRelatorios()">Ver Relatórios</button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <h3 class="action-title">Rotas</h3>
                        <p class="action-description">Planeje e otimize rotas de entrega para máxima eficiência.</p>
                        <button class="action-btn" onclick="gerenciarRotas()">Gerenciar Rotas</button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <h3 class="action-title">Configurações</h3>
                        <p class="action-description">Configure parâmetros do sistema e preferências.</p>
                        <button class="action-btn" onclick="configuracoes()">Configurar</button>
                    </div>
                </div>
                </div>
            </section>

            <!-- Seção Rotas -->
            <section class="content-section" id="secao-rotas">
                <div class="page-header">
                    <h2 class="page-title">Gerenciar Rotas</h2>
                    <p class="page-subtitle">Planeje e otimize rotas de entrega para máxima eficiência</p>
                </div>

                <div class="actions-bar">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" placeholder="Buscar rotas..." id="searchInputRotas">
                    </div>
                    <button class="btn-nova-rota" onclick="abrirModalNovaRota()">
                        <i class="fas fa-plus"></i>
                        Nova Rota
                    </button>
                </div>

                <div class="rotas-grid" id="rotasGrid">
                    <!-- Rotas serão carregadas aqui -->
                </div>

                <!-- Modal Nova Rota -->
                <div id="modalNovaRota" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Nova Rota</h3>
                            <span class="close" onclick="fecharModalRota()">&times;</span>
                        </div>
                        <form id="formNovaRota">
                            <div class="form-group">
                                <label class="form-label">Nome da Rota</label>
                                <input type="text" class="form-input" id="nomeRota" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Origem</label>
                                    <input type="text" class="form-input" id="origem" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Destino</label>
                                    <input type="text" class="form-input" id="destino" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Distância (km)</label>
                                    <input type="number" class="form-input" id="distancia" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Tempo Estimado (h)</label>
                                    <input type="number" class="form-input" id="tempoEstimado" step="0.5" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Custo (R$)</label>
                                    <input type="number" class="form-input" id="custo" step="0.01" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="statusRota">
                                        <option value="ativa">Ativa</option>
                                        <option value="inativa">Inativa</option>
                                        <option value="manutencao">Manutenção</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn-salvar">Salvar Rota</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Seção Configurações -->
            <section class="content-section" id="secao-configuracoes">
                <div class="page-header">
                    <h2 class="page-title">Configurações do Sistema</h2>
                    <p class="page-subtitle">Configure parâmetros do sistema e preferências</p>
                </div>

                <div class="config-sections">
                    <!-- Configurações Gerais -->
                    <div class="config-section">
                        <div class="section-header">
                            <i class="fas fa-cog section-icon"></i>
                            <h3 class="section-title">Configurações Gerais</h3>
                        </div>
                        <div class="section-content">
                            <div class="config-grid">
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Notificações por E-mail</div>
                                        <div class="config-description">Receber notificações de entregas por e-mail</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="emailNotifications" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Notificações SMS</div>
                                        <div class="config-description">Enviar SMS para clientes sobre status das entregas</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="smsNotifications" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Rastreamento em Tempo Real</div>
                                        <div class="config-description">Permitir rastreamento em tempo real das entregas</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="realTimeTracking" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Modo Escuro</div>
                                        <div class="config-description">Ativar tema escuro para o sistema</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="darkMode">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Configurações da Empresa -->
                    <div class="config-section">
                        <div class="section-header">
                            <i class="fas fa-building section-icon"></i>
                            <h3 class="section-title">Dados da Empresa</h3>
                        </div>
                        <div class="section-content">
                            <form id="formEmpresa">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Nome da Empresa</label>
                                        <input type="text" class="form-input" value="Expresso Itaporanga" id="nomeEmpresa">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">CNPJ</label>
                                        <input type="text" class="form-input" value="12.345.678/0001-90" id="cnpj">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Telefone SP</label>
                                        <input type="text" class="form-input" value="(11) 94036-1071" id="telefoneSP">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Telefone PB</label>
                                        <input type="text" class="form-input" value="(83) 99832-3948" id="telefonePB">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">E-mail Comercial</label>
                                    <input type="email" class="form-input" value="comercial@expressoitaporanga.com.br" id="emailComercial">
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Endereço SP</label>
                                        <input type="text" class="form-input" value="Rua Remanso, 12 - Guarulhos/SP" id="enderecoSP">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Endereço PB</label>
                                        <input type="text" class="form-input" value="Rod PB-372, S/N - Itaporanga/PB" id="enderecoPB">
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn-salvar">Salvar Alterações</button>
                            </form>
                        </div>
                    </div>

                    <!-- Configurações de Segurança -->
                    <div class="config-section">
                        <div class="section-header">
                            <i class="fas fa-shield-alt section-icon"></i>
                            <h3 class="section-title">Segurança</h3>
                        </div>
                        <div class="section-content">
                            <div class="config-grid">
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Autenticação de Dois Fatores</div>
                                        <div class="config-description">Adicionar camada extra de segurança no login</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="twoFactorAuth">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="config-item">
                                    <div class="config-info">
                                        <div class="config-label">Sessão Automática</div>
                                        <div class="config-description">Logout automático após inatividade</div>
                                    </div>
                                    <div class="config-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="autoLogout" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">Alterar Senha</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Nova Senha</label>
                                        <input type="password" class="form-input" id="novaSenha" placeholder="Digite a nova senha">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Confirmar Senha</label>
                                        <input type="password" class="form-input" id="confirmarSenha" placeholder="Confirme a nova senha">
                                    </div>
                                </div>
                                <button type="button" class="btn-salvar" onclick="alterarSenha()">
                                    <i class="fas fa-key"></i> Alterar Senha
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Verificar se o usuário está logado
        if (!localStorage.getItem('authToken')) {
            window.location.href = 'login.html';
        }

        // Definir nome do usuário
        document.getElementById('userName').textContent = localStorage.getItem('userName') || 'Admin';
        
        // Carregar estatísticas do dashboard
        carregarEstatisticas();
        
        // Função para carregar estatísticas reais da API
        async function carregarEstatisticas() {
            try {
                const response = await fetch('https://web-production-e1e7.up.railway.app/api/entregas');
                const entregas = await response.json();
                
                // Calcular estatísticas
                const totalEntregas = entregas.length;
                const entregasAtivas = entregas.filter(e => e.status === 'em_transito' || e.status === 'coletado' || e.status === 'pendente').length;
                const entregasEntregues = entregas.filter(e => e.status === 'entregue').length;
                const taxaSucesso = totalEntregas > 0 ? ((entregasEntregues / totalEntregas) * 100).toFixed(1) : 0;
                
                // Contar clientes únicos
                const clientesUnicos = new Set(entregas.map(e => e.destinatario_nome)).size;
                
                // Atualizar interface
                document.getElementById('entregasAtivas').textContent = entregasAtivas;
                document.getElementById('totalEntregas').textContent = totalEntregas;
                document.getElementById('taxaSucesso').textContent = taxaSucesso + '%';
                document.getElementById('clientesAtivos').textContent = clientesUnicos;
                
            } catch (error) {
                console.error('Erro ao carregar estatísticas:', error);
                // Fallback para valores padrão em caso de erro
                document.getElementById('entregasAtivas').textContent = '0';
                document.getElementById('totalEntregas').textContent = '0';
                document.getElementById('taxaSucesso').textContent = '0%';
                document.getElementById('clientesAtivos').textContent = '0';
            }
        }

        // Função de logout
        function logout() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('userName');
            window.location.href = 'index.html';
        }

        // Funções das ações
        function novaEntrega() {
            window.location.href = 'nova-entrega.html';
        }

        function gerenciarEntregas() {
            window.location.href = 'gerenciar-entregas.html';
        }

        function gerenciarClientes() {
            window.location.href = 'gerenciar-clientes.html';
        }

        function verRelatorios() {
            window.location.href = 'relatorios.html';
        }

        function gerenciarRotas() {
            mostrarSecao('rotas');
        }

        function configuracoes() {
            mostrarSecao('configuracoes');
        }

        // Sistema de navegação por seções
        function mostrarSecao(secao) {
            // Ocultar todas as seções
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remover classe active de todos os botões
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Mostrar seção selecionada
            document.getElementById('secao-' + secao).classList.add('active');
            document.getElementById('btn-' + secao).classList.add('active');
            
            // Carregar conteúdo específico da seção
            if (secao === 'rotas') {
                carregarSecaoRotas();
            } else if (secao === 'configuracoes') {
                carregarSecaoConfiguracoes();
            }
        }

        // Dados de exemplo das rotas
        let rotas = [
            {
                id: 1,
                nome: "SP - Itaporanga",
                origem: "São Paulo, SP",
                destino: "Itaporanga, PB",
                distancia: 2150,
                tempoEstimado: 28,
                custo: 850.00,
                status: "ativa",
                entregas: 45,
                utilizacao: 85
            },
            {
                id: 2,
                nome: "Guarulhos - Campina Grande",
                origem: "Guarulhos, SP",
                destino: "Campina Grande, PB",
                distancia: 2080,
                tempoEstimado: 26,
                custo: 780.00,
                status: "ativa",
                entregas: 32,
                utilizacao: 78
            },
            {
                id: 3,
                nome: "SP - Sousa",
                origem: "São Paulo, SP",
                destino: "Sousa, PB",
                distancia: 2280,
                tempoEstimado: 30,
                custo: 920.00,
                status: "manutencao",
                entregas: 18,
                utilizacao: 45
            }
        ];

        // Função para carregar seção de Rotas
        async function carregarSecaoRotas() {
            const grid = document.getElementById('rotasGrid');
            if (!grid) return;
            
            try {
                const response = await fetch('https://web-production-e1e7.up.railway.app/api/rotas');
                const rotasData = await response.json();
                
                grid.innerHTML = '';
                rotasData.forEach(rota => {
                    const rotaCard = criarCardRota(rota);
                    grid.appendChild(rotaCard);
                });
                
                // Atualizar variável global para busca
                rotas = rotasData;
            } catch (error) {
                console.error('Erro ao carregar rotas:', error);
                grid.innerHTML = '<p>Erro ao carregar rotas. Verifique sua conexão.</p>';
            }
            
            // Configurar busca
            const searchInput = document.getElementById('searchInputRotas');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const termo = e.target.value.toLowerCase();
                    const rotasFiltradas = rotas.filter(rota => 
                        rota.nome.toLowerCase().includes(termo) ||
                        rota.origem.toLowerCase().includes(termo) ||
                        rota.destino.toLowerCase().includes(termo)
                    );
                    
                    grid.innerHTML = '';
                    rotasFiltradas.forEach(rota => {
                        const rotaCard = criarCardRota(rota);
                        grid.appendChild(rotaCard);
                    });
                });
            }
        }

        // Criar card de rota
        function criarCardRota(rota) {
            const card = document.createElement('div');
            card.className = 'rota-card';
            
            const statusClass = `status-${rota.status}`;
            const statusText = {
                'ativa': 'Ativa',
                'inativa': 'Inativa',
                'manutencao': 'Manutenção'
            };

            card.innerHTML = `
                <div class="rota-header">
                    <h3 class="rota-nome">${rota.nome}</h3>
                    <span class="rota-status ${statusClass}">${statusText[rota.status]}</span>
                </div>
                
                <div class="rota-info">
                    <div class="info-item">
                        <i class="fas fa-map-marker-alt info-icon"></i>
                        <span>${rota.origem}</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-flag-checkered info-icon"></i>
                        <span>${rota.destino}</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-route info-icon"></i>
                        <span>${rota.distancia} km • ${rota.tempoEstimado}h</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-dollar-sign info-icon"></i>
                        <span>R$ ${rota.custo.toFixed(2)}</span>
                    </div>
                </div>
                
                <div class="rota-stats">
                    <div class="stat-item">
                        <div class="stat-value">${rota.entregas}</div>
                        <div class="stat-label">Entregas</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${rota.utilizacao}%</div>
                        <div class="stat-label">Utilização</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${(rota.custo / rota.distancia).toFixed(2)}</div>
                        <div class="stat-label">R$/km</div>
                    </div>
                </div>
                
                <div class="rota-actions">
                    <button class="btn-action btn-editar" onclick="editarRota(${rota.id})">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                    <button class="btn-action btn-otimizar" onclick="otimizarRota(${rota.id})">
                        <i class="fas fa-route"></i> Otimizar
                    </button>
                    <button class="btn-action btn-excluir" onclick="excluirRota(${rota.id})">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            `;

            return card;
        }

        // Funções do modal de rotas
        function abrirModalNovaRota() {
            document.getElementById('modalNovaRota').style.display = 'block';
        }

        function fecharModalRota() {
            document.getElementById('modalNovaRota').style.display = 'none';
            document.getElementById('formNovaRota').reset();
        }

        // Funções das ações de rotas
        function editarRota(id) {
            const rota = rotas.find(r => r.id === id);
            alert(`Funcionalidade em desenvolvimento: Editar rota "${rota.nome}"`);
        }

        function otimizarRota(id) {
            const rota = rotas.find(r => r.id === id);
            alert(`Funcionalidade em desenvolvimento: Otimizar rota "${rota.nome}"`);
        }

        function excluirRota(id) {
            const rota = rotas.find(r => r.id === id);
            if (confirm(`Tem certeza que deseja excluir a rota "${rota.nome}"?`)) {
                rotas = rotas.filter(r => r.id !== id);
                carregarSecaoRotas();
                alert('Rota excluída com sucesso!');
            }
        }

        // Menu hamburger
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.getElementById('nav').classList.toggle('active');
        });

        // Função para carregar seção de Configurações
        async function carregarSecaoConfiguracoes() {
            try {
                // Carregar configurações da API
                const configResponse = await fetch('https://web-production-e1e7.up.railway.app/api/configuracoes');
                const configSalvas = await configResponse.json();
                
                Object.keys(configSalvas).forEach(key => {
                    const checkbox = document.getElementById(key);
                    if (checkbox) {
                        checkbox.checked = configSalvas[key] === 'true';
                    }
                });
                
                // Carregar dados da empresa da API
                const empresaResponse = await fetch('https://web-production-e1e7.up.railway.app/api/empresa');
                const dadosEmpresa = await empresaResponse.json();
                
                if (dadosEmpresa) {
                    document.getElementById('nomeEmpresa').value = dadosEmpresa.nome || 'Expresso Itaporanga';
                    document.getElementById('cnpj').value = dadosEmpresa.cnpj || '12.345.678/0001-90';
                    document.getElementById('telefoneSP').value = dadosEmpresa.telefone || '(11) 94036-1071';
                    document.getElementById('telefonePB').value = dadosEmpresa.telefone || '(83) 99832-3948';
                    document.getElementById('emailComercial').value = dadosEmpresa.email || 'comercial@expressoitaporanga.com.br';
                    document.getElementById('enderecoSP').value = dadosEmpresa.endereco || 'Rua Remanso, 12 - Guarulhos/SP';
                    document.getElementById('enderecoPB').value = dadosEmpresa.endereco || 'Rod PB-372, S/N - Itaporanga/PB';
                }
            } catch (error) {
                console.error('Erro ao carregar configurações:', error);
                // Fallback para localStorage se API falhar
                const configSalvas = JSON.parse(localStorage.getItem('configuracoes') || '{}');
                Object.keys(configSalvas).forEach(key => {
                    const checkbox = document.getElementById(key);
                    if (checkbox) {
                        checkbox.checked = configSalvas[key];
                    }
                });
            }
            
            // Configurar event listeners para toggles
            document.querySelectorAll('#secao-configuracoes input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const config = {};
                    config[this.id] = this.checked;
                    
                    // Salvar no localStorage
                    const configSalvas = JSON.parse(localStorage.getItem('configuracoes') || '{}');
                    Object.assign(configSalvas, config);
                    localStorage.setItem('configuracoes', JSON.stringify(configSalvas));
                    
                    console.log(`Configuração ${this.id} alterada para: ${this.checked}`);
                });
            });
        }

        // Função para alterar senha
        function alterarSenha() {
            const novaSenha = document.getElementById('novaSenha').value;
            const confirmarSenha = document.getElementById('confirmarSenha').value;
            
            if (!novaSenha || !confirmarSenha) {
                alert('Por favor, preencha todos os campos de senha.');
                return;
            }
            
            if (novaSenha !== confirmarSenha) {
                alert('As senhas não coincidem.');
                return;
            }
            
            if (novaSenha.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
            
            // Simular alteração de senha
            alert('Senha alterada com sucesso!');
            document.getElementById('novaSenha').value = '';
            document.getElementById('confirmarSenha').value = '';
        }

        // Event listener para formulário de nova rota
        document.addEventListener('DOMContentLoaded', function() {
            const formNovaRota = document.getElementById('formNovaRota');
            if (formNovaRota) {
                formNovaRota.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const novaRota = {
                        id: rotas.length + 1,
                        nome: document.getElementById('nomeRota').value,
                        origem: document.getElementById('origem').value,
                        destino: document.getElementById('destino').value,
                        distancia: parseInt(document.getElementById('distancia').value),
                        tempoEstimado: parseFloat(document.getElementById('tempoEstimado').value),
                        custo: parseFloat(document.getElementById('custo').value),
                        status: document.getElementById('statusRota').value,
                        entregas: 0,
                        utilizacao: 0
                    };

                    rotas.push(novaRota);
                    carregarSecaoRotas();
                    fecharModalRota();
                    
                    alert('Rota criada com sucesso!');
                });
            }

            // Event listener para formulário da empresa
            const formEmpresa = document.getElementById('formEmpresa');
            if (formEmpresa) {
                formEmpresa.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const dadosEmpresa = {
                        nome: document.getElementById('nomeEmpresa').value,
                        cnpj: document.getElementById('cnpj').value,
                        telefoneSP: document.getElementById('telefoneSP').value,
                        telefonePB: document.getElementById('telefonePB').value,
                        email: document.getElementById('emailComercial').value,
                        enderecoSP: document.getElementById('enderecoSP').value,
                        enderecoPB: document.getElementById('enderecoPB').value
                    };
                    
                    localStorage.setItem('dadosEmpresa', JSON.stringify(dadosEmpresa));
                    alert('Dados da empresa salvos com sucesso!');
                });
            }
        });
    </script>
</body>
</html>
